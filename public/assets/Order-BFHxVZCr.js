import{C as e,D as t,F as n,M as r,T as i,c as a,d as o,et as s,g as c,h as l,i as u,k as d,m as f,x as p}from"./pinia-DWP-ePKp.js";import{n as m}from"./index-CRfUK4JQ.js";var h={class:`container mx-auto px-4 py-8`},g={key:0,class:`text-center py-20`},_={key:1,class:`text-center`},v={key:2,class:`text-center py-20 bg-white rounded shadow`},y={key:3,class:`space-y-4`},b={class:`flex justify-between border-b pb-2 mb-2`},x={class:`font-bold`},S={class:`text-gray-500 text-sm`},C={class:`px-2 py-1 bg-yellow-100 text-yellow-800 rounded text-xs`},w={class:`space-y-2`},T={class:`mt-2 pt-2 border-t text-right font-bold`},E={class:`text-primary`},D=c({__name:`Order`,setup(c){let D=m(),O=r([]),k=r(!0);return p(async()=>{if(D.isAuthenticated)try{let e=await fetch(`/api/my-orders`,{headers:{Authorization:`Bearer ${D.token}`}});e.ok&&(O.value=await e.json())}catch(e){console.error(e)}finally{k.value=!1}}),(r,c)=>{let p=t(`router-link`);return e(),o(`div`,h,[c[4]||=a(`h2`,{class:`text-2xl font-bold mb-6`},`我的订单`,-1),n(D).isAuthenticated?k.value?(e(),o(`div`,_,`加载中...`)):O.value.length===0?(e(),o(`div`,v,[...c[2]||=[a(`p`,{class:`text-gray-500`},`暂无订单`,-1)]])):(e(),o(`div`,y,[(e(!0),o(u,null,i(O.value,t=>(e(),o(`div`,{key:t.id,class:`bg-white rounded shadow p-4 border`},[a(`div`,b,[a(`span`,x,`订单号 #`+s(t.id),1),a(`span`,S,s(new Date(t.created_at).toLocaleString()),1),a(`span`,C,s(t.status),1)]),a(`div`,w,[(e(!0),o(u,null,i(t.items,(t,n)=>(e(),o(`div`,{key:n,class:`flex justify-between text-sm`},[a(`span`,null,s(t.name)+` (x`+s(t.quantity)+`)`,1),a(`span`,null,`¥`+s(t.price),1)]))),128))]),a(`div`,T,[c[3]||=f(` 总计: `,-1),a(`span`,E,`¥`+s(t.total_price.toFixed(2)),1)])]))),128))])):(e(),o(`div`,g,[c[1]||=a(`p`,null,`请先登录查看订单`,-1),l(p,{to:`/login`,class:`text-primary`},{default:d(()=>[...c[0]||=[f(`去登录`,-1)]]),_:1})]))])}}});export{D as default};