import{A as e,C as t,M as n,c as r,d as i,et as a,g as o,u as s}from"./pinia-DWP-ePKp.js";import{a as c,c as l,l as u,n as d}from"./index-CRfUK4JQ.js";var f={class:`min-h-screen flex items-center justify-center bg-gray-100`},p={class:`bg-white p-8 rounded shadow-md w-full max-w-md`},m={class:`text-2xl font-bold mb-6 text-center text-primary`},h={key:0,class:`bg-red-100 text-red-700 p-3 rounded mb-4`},g={type:`submit`,class:`w-full bg-primary text-white py-2 rounded hover:bg-blue-700 transition`},_={class:`mt-4 text-center text-sm`},v={key:1,class:`mt-4 text-center text-xs text-gray-500`},y=o({__name:`Login`,setup(o){let y=n(!1),b=n(``),x=n(``),S=c(),C=d(),w=n(``);async function T(){let e=y.value?`/api/register`:`/api/login`;try{let t=await fetch(e,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({username:b.value,password:x.value})}),n=await t.json();t.ok?(C.login(n.token,n.user),S.push(`/`)):w.value=n.error}catch{w.value=`Request failed`}}function E(){y.value=!y.value,w.value=``,b.value=``,x.value=``}return(n,o)=>(t(),i(`div`,f,[r(`div`,p,[r(`h2`,m,a(y.value?`注册账号`:`登录商城`),1),w.value?(t(),i(`div`,h,a(w.value),1)):s(``,!0),r(`form`,{onSubmit:u(T,[`prevent`]),class:`space-y-4`},[r(`div`,null,[o[2]||=r(`label`,{class:`block text-gray-700 mb-1`},`用户名`,-1),e(r(`input`,{"onUpdate:modelValue":o[0]||=e=>b.value=e,type:`text`,class:`w-full border rounded px-3 py-2`,required:``,placeholder:`请输入用户名`},null,512),[[l,b.value]])]),r(`div`,null,[o[3]||=r(`label`,{class:`block text-gray-700 mb-1`},`密码`,-1),e(r(`input`,{"onUpdate:modelValue":o[1]||=e=>x.value=e,type:`password`,class:`w-full border rounded px-3 py-2`,required:``,placeholder:`请输入密码`},null,512),[[l,x.value]])]),r(`button`,g,a(y.value?`立即注册`:`登录`),1)],32),r(`div`,_,[r(`button`,{onClick:E,class:`text-primary hover:underline`},a(y.value?`已有账号？去登录`:`没有账号？去注册`),1)]),y.value?s(``,!0):(t(),i(`p`,v,`Demo账户: admin / admin123`))])]))}});export{y as default};