import{C as e,T as t,U as n,c as r,l as i,o as a,p as o,t as s,v as c}from"./auth-byHFbW31.js";import{a as l,i as u,r as d}from"./index-COKga09v.js";var f={class:`min-h-screen flex items-center justify-center bg-gray-800`},p={class:`bg-white p-8 rounded shadow-md w-full max-w-md`},m={key:0,class:`bg-red-100 text-red-700 p-3 rounded mb-4`},h=o({__name:`Login`,setup(o){let h=t(`admin`),g=t(`admin123`),_=d(),v=s(),y=t(``);async function b(){try{let e=await fetch(`/api/login`,{method:`POST`,headers:{"Content-Type":`application/json`},body:JSON.stringify({username:h.value,password:g.value})}),t=await e.json();if(e.ok){if(t.user.role!==`admin`){y.value=`Access Denied: Not an admin`;return}v.login(t.token,t.user),_.push(`/`)}else y.value=t.error}catch{y.value=`Login failed`}}return(t,o)=>(c(),i(`div`,f,[a(`div`,p,[o[5]||=a(`h2`,{class:`text-2xl font-bold mb-6 text-center text-primary`},`管理员后台登录`,-1),y.value?(c(),i(`div`,m,n(y.value),1)):r(``,!0),a(`form`,{onSubmit:l(b,[`prevent`]),class:`space-y-4`},[a(`div`,null,[o[2]||=a(`label`,{class:`block text-gray-700 mb-1`},`用户名`,-1),e(a(`input`,{"onUpdate:modelValue":o[0]||=e=>h.value=e,type:`text`,class:`w-full border rounded px-3 py-2`,required:``},null,512),[[u,h.value]])]),a(`div`,null,[o[3]||=a(`label`,{class:`block text-gray-700 mb-1`},`密码`,-1),e(a(`input`,{"onUpdate:modelValue":o[1]||=e=>g.value=e,type:`password`,class:`w-full border rounded px-3 py-2`,required:``},null,512),[[u,g.value]])]),o[4]||=a(`button`,{type:`submit`,class:`w-full bg-primary text-white py-2 rounded hover:bg-blue-700`},`登录`,-1)],32)])]))}});export{h as default};